<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Siempre juntos üíñ</title>

<style>
  :root{
    --pink:#ff4d88;
    --pink2:#ff87b0;
    --bg1:#12001a;
    --bg2:#2a0c2b;
    --card: rgba(255,255,255,.10);
    --stroke: rgba(255,255,255,.14);
    --text: rgba(255,255,255,.92);
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    min-height:100vh;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
    display:flex;
    justify-content:center;
    align-items:center;
    background:
      radial-gradient(900px 520px at 50% 0%, rgba(255,77,136,.20), transparent 55%),
      radial-gradient(700px 520px at 10% 20%, rgba(255,135,176,.14), transparent 55%),
      radial-gradient(850px 650px at 90% 25%, rgba(167,82,255,.14), transparent 55%),
      linear-gradient(135deg,var(--bg1),var(--bg2));
    color:var(--text);
    overflow:hidden;
    padding:18px;
  }

  /* Estrellas */
  .stars{
    position:fixed; inset:0;
    opacity:.35;
    pointer-events:none;
    background-image:
      radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,.35) 50%, transparent 52%),
      radial-gradient(1px 1px at 90px 120px, rgba(255,255,255,.25) 50%, transparent 52%),
      radial-gradient(1.5px 1.5px at 210px 200px, rgba(255,255,255,.22) 50%, transparent 52%),
      radial-gradient(1px 1px at 320px 80px, rgba(255,255,255,.20) 50%, transparent 52%),
      radial-gradient(2px 2px at 160px 260px, rgba(255,255,255,.18) 50%, transparent 52%);
    background-size: 360px 280px;
    animation: drift 14s linear infinite;
  }
  @keyframes drift{from{transform:translateY(0)}to{transform:translateY(40px)}}

  .container{
    width:100%;
    max-width:420px;
    display:flex;
    flex-direction:column;
    align-items:center;
    text-align:center;
    gap:14px;
    position:relative;
    z-index:2;
  }

  /* √Årbol: m√°s bonito */
  .treeWrap{
    width: 260px;
    height: 260px;
    position:relative;
    cursor:pointer;
    user-select:none;
    filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
    animation: sway 4.5s ease-in-out infinite;
    transform-origin: 50% 85%;
  }
  @keyframes sway{
    0%,100%{transform:rotate(-1.2deg)}
    50%{transform:rotate(1.2deg)}
  }

  /* Brillito detr√°s */
  .glow{
    position:absolute;
    left:50%; top:40%;
    transform:translate(-50%,-50%);
    width:220px; height:220px;
    background: radial-gradient(circle, rgba(255,77,136,.22), transparent 60%);
    filter: blur(2px);
  }

  /* Copa como nube */
  .crown{
    position:absolute;
    top:10px;
    left:50%;
    transform:translateX(-50%);
    width:230px;
    height:170px;
    border-radius: 120px;
    background:
      radial-gradient(circle at 30% 35%, rgba(255,255,255,.10), transparent 45%),
      radial-gradient(circle at 70% 30%, rgba(255,255,255,.08), transparent 46%),
      radial-gradient(circle at 50% 60%, rgba(255,77,136,.18), transparent 55%),
      linear-gradient(180deg, rgba(255,77,136,.18), rgba(255,77,136,.08));
    border: 1px solid rgba(255,255,255,.10);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
  }

  /* Corazones dentro de la copa */
  .heart{
    position:absolute;
    width:18px;
    height:18px;
    background: linear-gradient(180deg, var(--pink2), var(--pink));
    transform: rotate(45deg);
    border-radius: 4px;
    box-shadow: 0 8px 18px rgba(255,77,136,.18);
    animation: pulse 1.8s ease-in-out infinite;
  }
  .heart::before,.heart::after{
    content:"";
    position:absolute;
    width:18px;height:18px;
    background:inherit;
    border-radius:50%;
  }
  .heart::before{left:-9px;top:0}
  .heart::after{left:0;top:-9px}
  @keyframes pulse{
    0%,100%{transform:rotate(45deg) scale(1)}
    50%{transform:rotate(45deg) scale(1.12)}
  }

  /* Tronco y base */
  .trunk{
    position:absolute;
    bottom:36px;
    left:50%;
    transform:translateX(-50%);
    width:34px;
    height:110px;
    border-radius: 14px;
    background: linear-gradient(180deg, #7a3a25, #3c1610);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
  }
  .base{
    position:absolute;
    bottom:18px;
    left:50%;
    transform:translateX(-50%);
    width: 170px;
    height: 36px;
    border-radius: 999px;
    background: rgba(0,0,0,.22);
    filter: blur(.2px);
  }

  /* Texto */
  h1{
    font-size:28px;
    font-weight:900;
    letter-spacing:.2px;
  }
  .subtitle{
    font-size:14px;
    opacity:.9;
    margin-top:2px;
  }
  .strong{
    font-weight:900;
    margin-top:4px;
    opacity:.96;
  }

  /* Contador */
  .counter{
    width:100%;
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:10px;
    margin-top:4px;
  }
  .pill{
    background: var(--card);
    border:1px solid var(--stroke);
    padding:14px;
    border-radius:16px;
    backdrop-filter: blur(8px);
  }
  .num{
    font-size:26px;
    font-weight:950;
  }
  .lbl{
    font-size:11px;
    opacity:.82;
    margin-top:2px;
    letter-spacing:.3px;
    text-transform:uppercase;
  }

  /* Botones */
  .btns{
    width:100%;
    display:flex;
    gap:10px;
    justify-content:center;
    margin-top:6px;
  }
  button{
    flex:1;
    border:none;
    padding:13px 14px;
    border-radius:14px;
    font-weight:900;
    color:white;
    background: linear-gradient(90deg, var(--pink), #ff2f78);
    box-shadow: 0 14px 30px rgba(255,77,136,.22);
    cursor:pointer;
  }
  button.secondary{
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.18);
    box-shadow:none;
  }

  /* Lluvia corazones */
  .leafLayer{
    position:fixed; inset:0;
    pointer-events:none;
    z-index:1;
  }
  .leaf{
    position:absolute;
    left:0; top:0;
    font-size:18px;
    opacity:.95;
    filter: drop-shadow(0 10px 16px rgba(0,0,0,.18));
    animation: fall linear forwards;
  }
  @keyframes fall{
    to{
      transform: translate(-220px, 110vh) rotate(560deg);
      opacity:0;
    }
  }

  /* Parejita abajo */
  .couple{
    position:fixed;
    left:50%;
    bottom:18px;
    transform:translateX(-50%);
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.16);
    backdrop-filter: blur(10px);
    padding:10px 14px;
    border-radius: 18px;
    display:flex;
    gap:10px;
    align-items:center;
    opacity:0;
    pointer-events:none;
    z-index:20;
  }
  .couple.show{
    animation: pop 420ms ease forwards;
  }
  @keyframes pop{
    0%{transform:translateX(-50%) translateY(12px) scale(.88); opacity:0}
    100%{transform:translateX(-50%) translateY(0) scale(1); opacity:1}
  }
  .dolls{
    font-size:26px;
    line-height:1;
  }
  .coupleText{
    font-weight:900;
    font-size:12px;
    opacity:.95;
    text-align:left;
    line-height:1.15;
  }

  /* Modal carta */
  .modal{
    position:fixed; inset:0;
    display:none;
    justify-content:center;
    align-items:center;
    background: rgba(0,0,0,.6);
    padding:18px;
    z-index:30;
  }
  .modal.show{display:flex;}
  .modalBox{
    width:min(340px,100%);
    background: rgba(255,255,255,.96);
    color:#2a1b22;
    padding:18px;
    border-radius:18px;
    text-align:center;
  }
  .modalBox h2{margin-bottom:8px}
  .modalBox p{opacity:.95; line-height:1.45}
  .closeBtn{
    margin-top:12px;
    width:100%;
    border:none;
    padding:12px 14px;
    border-radius:12px;
    font-weight:900;
    background:#2a1b22;
    color:white;
    cursor:pointer;
  }
</style>
</head>

<body>
  <div class="stars"></div>
  <div class="leafLayer" id="leafLayer"></div>

  <main class="container">
    <!-- √Årbol -->
    <div class="treeWrap" id="tree" title="T√≥came para m√°s hojitas üíó">
      <div class="glow"></div>
      <div class="crown" id="crown"></div>
      <div class="trunk"></div>
      <div class="base"></div>
    </div>

    <h1>Siempre juntos ‚ú®üíñ</h1>
    <div class="subtitle">Desde el 20 de noviembre de 2020</div>
    <div class="strong">Siempre fuertes üíû</div>

    <section class="counter">
      <div class="pill"><div class="num" id="days">0</div><div class="lbl">D√≠as</div></div>
      <div class="pill"><div class="num" id="hours">0</div><div class="lbl">Horas</div></div>
      <div class="pill"><div class="num" id="mins">0</div><div class="lbl">Minutos</div></div>
      <div class="pill"><div class="num" id="secs">0</div><div class="lbl">Segundos</div></div>
    </section>

    <div class="btns">
      <button id="rainBtn">Lluvia üíó</button>
      <button class="secondary" id="msgBtn">Carta üíå</button>
    </div>
  </main>

  <!-- Parejita -->
  <div class="couple" id="couple">
    <div class="dolls">üß∏üíãüß∏</div>
    <div class="coupleText">
      Siempre juntos<br/>Siempre fuertes
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modalBox">
      <h2>üíå Para ti</h2>
      <p>
        Gracias por quedarte, por construir conmigo y por no soltar mi mano.
        Que la vida nos encuentre siempre del mismo lado:
        <b>siempre juntos, siempre fuertes</b>. ‚ù§Ô∏è
      </p>
      <button class="closeBtn" id="closeBtn">Cerrar</button>
    </div>
  </div>

<script>
  // ===== CONTADOR =====
  const startDate = new Date("2020-11-20T00:00:00");
  const elDays = document.getElementById("days");
  const elHours = document.getElementById("hours");
  const elMins = document.getElementById("mins");
  const elSecs = document.getElementById("secs");

  function updateCounter(){
    const now = new Date();
    let diff = now - startDate;
    if(diff < 0) diff = 0;

    const total = Math.floor(diff/1000);
    const days = Math.floor(total/86400);
    const hours = Math.floor((total%86400)/3600);
    const mins = Math.floor((total%3600)/60);
    const secs = total%60;

    elDays.textContent = days;
    elHours.textContent = hours;
    elMins.textContent = mins;
    elSecs.textContent = secs;
  }
  updateCounter();
  setInterval(updateCounter, 1000);

  // ===== CORAZONES EN COPA (bonito) =====
  const crown = document.getElementById("crown");
  function addHeart(x,y,scale){
    const h = document.createElement("div");
    h.className = "heart";
    h.style.left = x + "px";
    h.style.top = y + "px";
    h.style.transform = `rotate(45deg) scale(${scale})`;
    h.style.animationDelay = (Math.random()*1.2) + "s";
    crown.appendChild(h);
  }

  // Distribuci√≥n suave dentro de la copa
  (function buildCrown(){
    crown.innerHTML = "";
    const w = 230, h = 170;
    const hearts = 30;

    for(let i=0;i<hearts;i++){
      // distribuci√≥n m√°s "redonda": m√°s cerca al centro
      const rx = (Math.random() + Math.random())/2; // sesgo al centro
      const ry = (Math.random() + Math.random())/2;
      const x = 18 + rx*(w-36);
      const y = 18 + ry*(h-36);
      const s = 0.85 + Math.random()*0.55;
      addHeart(x,y,s);
    }
  })();

  // ===== LLUVIA =====
  const layer = document.getElementById("leafLayer");
  const tree = document.getElementById("tree");
  const couple = document.getElementById("couple");

  const HEARTS = ["üíó","üíñ","üíï","üíû","üíò","üíù"];

  function leaf(fromTree = true){
    const l = document.createElement("div");
    l.className = "leaf";
    l.textContent = HEARTS[Math.floor(Math.random()*HEARTS.length)];

    let x = Math.random()*window.innerWidth;
    let y = -20;

    if(fromTree){
      const r = tree.getBoundingClientRect();
      x = r.left + r.width/2 + (Math.random()*120 - 60);
      y = r.top + 30 + (Math.random()*30);
    }

    l.style.transform = `translate(${x}px, ${y}px)`;
    l.style.animationDuration = (3 + Math.random()*3) + "s";
    l.style.fontSize = (16 + Math.random()*18) + "px";

    layer.appendChild(l);
    setTimeout(()=>l.remove(), 6500);
  }

  // Lluvia base (m√°s constante)
  let baseRate = 260; // ms
  setInterval(()=>{ leaf(true); }, baseRate);

  // Aumenta ‚Äúm√°s y m√°s‚Äù cada 12s
  setInterval(()=>{
    baseRate = Math.max(120, baseRate - 20);
  }, 12000);

  // Burst fuerte
  function burst(n=36){
    for(let i=0;i<n;i++){
      setTimeout(()=>leaf(true), i*45);
    }
  }

  // Parejita (aparece y se va)
  let coupleTimer = null;
  function showCouple(){
    couple.classList.remove("show"); // reinicia anim
    void couple.offsetWidth;
    couple.classList.add("show");
    clearTimeout(coupleTimer);
    coupleTimer = setTimeout(()=> couple.classList.remove("show"), 2200);
  }

  // Click √°rbol
  tree.addEventListener("click", ()=>{
    burst(44);
    showCouple();
  });

  // Bot√≥n lluvia
  const rainBtn = document.getElementById("rainBtn");
  rainBtn.addEventListener("click", ()=>{
    burst(55);
    showCouple();
  });

  // Modal carta
  const modal = document.getElementById("modal");
  const msgBtn = document.getElementById("msgBtn");
  const closeBtn = document.getElementById("closeBtn");

  msgBtn.addEventListener("click", ()=>{
    modal.classList.add("show");
    burst(30);
    showCouple();
  });
  closeBtn.addEventListener("click", ()=> modal.classList.remove("show"));
  modal.addEventListener("click", (e)=>{
    if(e.target === modal) modal.classList.remove("show");
  });
</script>
</body>
</html>
